var Rs=t=>{throw TypeError(t)};var Bt=(t,e,s)=>e.has(t)||Rs("Cannot "+s);var a=(t,e,s)=>(Bt(t,e,"read from private field"),s?s.call(t):e.get(t)),O=(t,e,s)=>e.has(t)?Rs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),p=(t,e,s,r)=>(Bt(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),A=(t,e,s)=>(Bt(t,e,"access private method"),s);var At=(t,e,s,r)=>({set _(i){p(t,e,i,s)},get _(){return a(t,e,r)}});import{r as Y,R as q}from"./react-core-C2Lho-Ro.js";import{j as Br}from"./ui-core-DSsgHKQi.js";var ft=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Je=typeof window>"u"||"Deno"in globalThis;function ve(){}function Kr(t,e){return typeof t=="function"?t(e):t}function Gt(t){return typeof t=="number"&&t>=0&&t!==1/0}function nr(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ze(t,e){return typeof t=="function"?t(e):t}function be(t,e){return typeof t=="function"?t(e):t}function Ds(t,e){const{type:s="all",exact:r,fetchStatus:i,predicate:u,queryKey:l,stale:c}=t;if(l){if(r){if(e.queryHash!==as(l,e.options))return!1}else if(!Ft(e.queryKey,l))return!1}if(s!=="all"){const y=e.isActive();if(s==="active"&&!y||s==="inactive"&&y)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||u&&!u(e))}function xs(t,e){const{exact:s,status:r,predicate:i,mutationKey:u}=t;if(u){if(!e.options.mutationKey)return!1;if(s){if(Ye(e.options.mutationKey)!==Ye(u))return!1}else if(!Ft(e.options.mutationKey,u))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function as(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ye)(t)}function Ye(t){return JSON.stringify(t,(e,s)=>Wt(s)?Object.keys(s).sort().reduce((r,i)=>(r[i]=s[i],r),{}):s)}function Ft(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(s=>!Ft(t[s],e[s])):!1}function ar(t,e){if(t===e)return t;const s=Vs(t)&&Vs(e);if(s||Wt(t)&&Wt(e)){const r=s?t:Object.keys(t),i=r.length,u=s?e:Object.keys(e),l=u.length,c=s?[]:{};let y=0;for(let C=0;C<l;C++){const b=s?C:u[C];(!s&&r.includes(b)||s)&&t[b]===void 0&&e[b]===void 0?(c[b]=void 0,y++):(c[b]=ar(t[b],e[b]),c[b]===t[b]&&t[b]!==void 0&&y++)}return i===l&&y===i?t:c}return e}function Vt(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function Vs(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Wt(t){if(!Ps(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!Ps(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ps(t){return Object.prototype.toString.call(t)==="[object Object]"}function Hr(t){return new Promise(e=>{setTimeout(e,t)})}function $t(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?ar(t,e):e}function Gr(t,e,s=0){const r=[...t,e];return s&&r.length>s?r.slice(1):r}function Wr(t,e,s=0){const r=[e,...t];return s&&r.length>s?r.slice(0,-1):r}var us=Symbol();function ur(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===us?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Be,Me,et,zs,$r=(zs=class extends ft{constructor(){super();O(this,Be);O(this,Me);O(this,et);p(this,et,e=>{if(!Je&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){a(this,Me)||this.setEventListener(a(this,et))}onUnsubscribe(){var e;this.hasListeners()||((e=a(this,Me))==null||e.call(this),p(this,Me,void 0))}setEventListener(e){var s;p(this,et,e),(s=a(this,Me))==null||s.call(this),p(this,Me,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){a(this,Be)!==e&&(p(this,Be,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof a(this,Be)=="boolean"?a(this,Be):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Be=new WeakMap,Me=new WeakMap,et=new WeakMap,zs),os=new $r,tt,ke,st,Js,zr=(Js=class extends ft{constructor(){super();O(this,tt,!0);O(this,ke);O(this,st);p(this,st,e=>{if(!Je&&window.addEventListener){const s=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){a(this,ke)||this.setEventListener(a(this,st))}onUnsubscribe(){var e;this.hasListeners()||((e=a(this,ke))==null||e.call(this),p(this,ke,void 0))}setEventListener(e){var s;p(this,st,e),(s=a(this,ke))==null||s.call(this),p(this,ke,e(this.setOnline.bind(this)))}setOnline(e){a(this,tt)!==e&&(p(this,tt,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return a(this,tt)}},tt=new WeakMap,ke=new WeakMap,st=new WeakMap,Js),Pt=new zr;function zt(){let t,e;const s=new Promise((i,u)=>{t=i,e=u});s.status="pending",s.catch(()=>{});function r(i){Object.assign(s,i),delete s.resolve,delete s.reject}return s.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},s.reject=i=>{r({status:"rejected",reason:i}),e(i)},s}function Jr(t){return Math.min(1e3*2**t,3e4)}function or(t){return(t??"online")==="online"?Pt.isOnline():!0}var lr=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Kt(t){return t instanceof lr}function cr(t){let e=!1,s=0,r=!1,i;const u=zt(),l=S=>{var E;r||(m(new lr(S)),(E=t.abort)==null||E.call(t))},c=()=>{e=!0},y=()=>{e=!1},C=()=>os.isFocused()&&(t.networkMode==="always"||Pt.isOnline())&&t.canRun(),b=()=>or(t.networkMode)&&t.canRun(),f=S=>{var E;r||(r=!0,(E=t.onSuccess)==null||E.call(t,S),i==null||i(),u.resolve(S))},m=S=>{var E;r||(r=!0,(E=t.onError)==null||E.call(t,S),i==null||i(),u.reject(S))},R=()=>new Promise(S=>{var E;i=V=>{(r||C())&&S(V)},(E=t.onPause)==null||E.call(t)}).then(()=>{var S;i=void 0,r||(S=t.onContinue)==null||S.call(t)}),T=()=>{if(r)return;let S;const E=s===0?t.initialPromise:void 0;try{S=E??t.fn()}catch(V){S=Promise.reject(V)}Promise.resolve(S).then(f).catch(V=>{var X;if(r)return;const _=t.retry??(Je?0:3),P=t.retryDelay??Jr,I=typeof P=="function"?P(s,V):P,U=_===!0||typeof _=="number"&&s<_||typeof _=="function"&&_(s,V);if(e||!U){m(V);return}s++,(X=t.onFail)==null||X.call(t,s,V),Hr(I).then(()=>C()?void 0:R()).then(()=>{e?m(V):T()})})};return{promise:u,cancel:l,continue:()=>(i==null||i(),u),cancelRetry:c,continueRetry:y,canStart:b,start:()=>(b()?T():R().then(T),u)}}function Yr(){let t=[],e=0,s=c=>{c()},r=c=>{c()},i=c=>setTimeout(c,0);const u=c=>{e?t.push(c):i(()=>{s(c)})},l=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(y=>{s(y)})})})};return{batch:c=>{let y;e++;try{y=c()}finally{e--,e||l()}return y},batchCalls:c=>(...y)=>{u(()=>{c(...y)})},schedule:u,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var J=Yr(),Ke,Ys,hr=(Ys=class{constructor(){O(this,Ke)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Gt(this.gcTime)&&p(this,Ke,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Je?1/0:5*60*1e3))}clearGcTimeout(){a(this,Ke)&&(clearTimeout(a(this,Ke)),p(this,Ke,void 0))}},Ke=new WeakMap,Ys),rt,it,ye,se,wt,He,ge,Ae,Xs,Xr=(Xs=class extends hr{constructor(e){super();O(this,ge);O(this,rt);O(this,it);O(this,ye);O(this,se);O(this,wt);O(this,He);p(this,He,!1),p(this,wt,e.defaultOptions),this.setOptions(e.options),this.observers=[],p(this,ye,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,p(this,rt,Zr(this.options)),this.state=e.state??a(this,rt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=a(this,se))==null?void 0:e.promise}setOptions(e){this.options={...a(this,wt),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&a(this,ye).remove(this)}setData(e,s){const r=$t(this.state.data,e,this.options);return A(this,ge,Ae).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(e,s){A(this,ge,Ae).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var r,i;const s=(r=a(this,se))==null?void 0:r.promise;return(i=a(this,se))==null||i.cancel(e),s?s.then(ve).catch(ve):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(a(this,rt))}isActive(){return this.observers.some(e=>be(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===us||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!nr(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=a(this,se))==null||s.continue()}onOnline(){var s;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=a(this,se))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),a(this,ye).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(a(this,se)&&(a(this,He)?a(this,se).cancel({revert:!0}):a(this,se).cancelRetry()),this.scheduleGc()),a(this,ye).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||A(this,ge,Ae).call(this,{type:"invalidate"})}fetch(e,s){var y,C,b;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(a(this,se))return a(this,se).continueRetry(),a(this,se).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(p(this,He,!0),r.signal)})},u=()=>{const f=ur(this.options,s),m={queryKey:this.queryKey,meta:this.meta};return i(m),p(this,He,!1),this.options.persister?this.options.persister(f,m,this):f(m)},l={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};i(l),(y=this.options.behavior)==null||y.onFetch(l,this),p(this,it,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((C=l.fetchOptions)==null?void 0:C.meta))&&A(this,ge,Ae).call(this,{type:"fetch",meta:(b=l.fetchOptions)==null?void 0:b.meta});const c=f=>{var m,R,T,S;Kt(f)&&f.silent||A(this,ge,Ae).call(this,{type:"error",error:f}),Kt(f)||((R=(m=a(this,ye).config).onError)==null||R.call(m,f,this),(S=(T=a(this,ye).config).onSettled)==null||S.call(T,this.state.data,f,this)),this.scheduleGc()};return p(this,se,cr({initialPromise:s==null?void 0:s.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var m,R,T,S;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(E){c(E);return}(R=(m=a(this,ye).config).onSuccess)==null||R.call(m,f,this),(S=(T=a(this,ye).config).onSettled)==null||S.call(T,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,m)=>{A(this,ge,Ae).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{A(this,ge,Ae).call(this,{type:"pause"})},onContinue:()=>{A(this,ge,Ae).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),a(this,se).start()}},rt=new WeakMap,it=new WeakMap,ye=new WeakMap,se=new WeakMap,wt=new WeakMap,He=new WeakMap,ge=new WeakSet,Ae=function(e){const s=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...dr(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Kt(i)&&i.revert&&a(this,it)?{...a(this,it),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=s(this.state),J.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),a(this,ye).notify({query:this,type:"updated",action:e})})},Xs);function dr(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:or(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Zr(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,r=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var we,Zs,ei=(Zs=class extends ft{constructor(e={}){super();O(this,we);this.config=e,p(this,we,new Map)}build(e,s,r){const i=s.queryKey,u=s.queryHash??as(i,s);let l=this.get(u);return l||(l=new Xr({cache:this,queryKey:i,queryHash:u,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(l)),l}add(e){a(this,we).has(e.queryHash)||(a(this,we).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=a(this,we).get(e.queryHash);s&&(e.destroy(),s===e&&a(this,we).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){J.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return a(this,we).get(e)}getAll(){return[...a(this,we).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>Ds(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>Ds(e,r)):s}notify(e){J.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){J.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){J.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},we=new WeakMap,Zs),Se,re,Ge,_e,Ve,er,ti=(er=class extends hr{constructor(e){super();O(this,_e);O(this,Se);O(this,re);O(this,Ge);this.mutationId=e.mutationId,p(this,re,e.mutationCache),p(this,Se,[]),this.state=e.state||fr(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){a(this,Se).includes(e)||(a(this,Se).push(e),this.clearGcTimeout(),a(this,re).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){p(this,Se,a(this,Se).filter(s=>s!==e)),this.scheduleGc(),a(this,re).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){a(this,Se).length||(this.state.status==="pending"?this.scheduleGc():a(this,re).remove(this))}continue(){var e;return((e=a(this,Ge))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,u,l,c,y,C,b,f,m,R,T,S,E,V,_,P,I,U,X,K;p(this,Ge,cr({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,M)=>{A(this,_e,Ve).call(this,{type:"failed",failureCount:N,error:M})},onPause:()=>{A(this,_e,Ve).call(this,{type:"pause"})},onContinue:()=>{A(this,_e,Ve).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>a(this,re).canRun(this)}));const s=this.state.status==="pending",r=!a(this,Ge).canStart();try{if(!s){A(this,_e,Ve).call(this,{type:"pending",variables:e,isPaused:r}),await((u=(i=a(this,re).config).onMutate)==null?void 0:u.call(i,e,this));const M=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));M!==this.state.context&&A(this,_e,Ve).call(this,{type:"pending",context:M,variables:e,isPaused:r})}const N=await a(this,Ge).start();return await((C=(y=a(this,re).config).onSuccess)==null?void 0:C.call(y,N,e,this.state.context,this)),await((f=(b=this.options).onSuccess)==null?void 0:f.call(b,N,e,this.state.context)),await((R=(m=a(this,re).config).onSettled)==null?void 0:R.call(m,N,null,this.state.variables,this.state.context,this)),await((S=(T=this.options).onSettled)==null?void 0:S.call(T,N,null,e,this.state.context)),A(this,_e,Ve).call(this,{type:"success",data:N}),N}catch(N){try{throw await((V=(E=a(this,re).config).onError)==null?void 0:V.call(E,N,e,this.state.context,this)),await((P=(_=this.options).onError)==null?void 0:P.call(_,N,e,this.state.context)),await((U=(I=a(this,re).config).onSettled)==null?void 0:U.call(I,void 0,N,this.state.variables,this.state.context,this)),await((K=(X=this.options).onSettled)==null?void 0:K.call(X,void 0,N,e,this.state.context)),N}finally{A(this,_e,Ve).call(this,{type:"error",error:N})}}finally{a(this,re).runNext(this)}}},Se=new WeakMap,re=new WeakMap,Ge=new WeakMap,_e=new WeakSet,Ve=function(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),J.batch(()=>{a(this,Se).forEach(r=>{r.onMutationUpdate(e)}),a(this,re).notify({mutation:this,type:"updated",action:e})})},er);function fr(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var he,St,tr,si=(tr=class extends ft{constructor(e={}){super();O(this,he);O(this,St);this.config=e,p(this,he,new Map),p(this,St,Date.now())}build(e,s,r){const i=new ti({mutationCache:this,mutationId:++At(this,St)._,options:e.defaultMutationOptions(s),state:r});return this.add(i),i}add(e){const s=Rt(e),r=a(this,he).get(s)??[];r.push(e),a(this,he).set(s,r),this.notify({type:"added",mutation:e})}remove(e){var r;const s=Rt(e);if(a(this,he).has(s)){const i=(r=a(this,he).get(s))==null?void 0:r.filter(u=>u!==e);i&&(i.length===0?a(this,he).delete(s):a(this,he).set(s,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const s=(r=a(this,he).get(Rt(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}runNext(e){var r;const s=(r=a(this,he).get(Rt(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}clear(){J.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...a(this,he).values()].flat()}find(e){const s={exact:!0,...e};return this.getAll().find(r=>xs(s,r))}findAll(e={}){return this.getAll().filter(s=>xs(e,s))}notify(e){J.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return J.batch(()=>Promise.all(e.map(s=>s.continue().catch(ve))))}},he=new WeakMap,St=new WeakMap,tr);function Rt(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function Ms(t){return{onFetch:(e,s)=>{var b,f,m,R,T;const r=e.options,i=(m=(f=(b=e.fetchOptions)==null?void 0:b.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,u=((R=e.state.data)==null?void 0:R.pages)||[],l=((T=e.state.data)==null?void 0:T.pageParams)||[];let c={pages:[],pageParams:[]},y=0;const C=async()=>{let S=!1;const E=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(e.signal.aborted?S=!0:e.signal.addEventListener("abort",()=>{S=!0}),e.signal)})},V=ur(e.options,e.fetchOptions),_=async(P,I,U)=>{if(S)return Promise.reject();if(I==null&&P.pages.length)return Promise.resolve(P);const X={queryKey:e.queryKey,pageParam:I,direction:U?"backward":"forward",meta:e.options.meta};E(X);const K=await V(X),{maxPages:N}=e.options,M=U?Wr:Gr;return{pages:M(P.pages,K,N),pageParams:M(P.pageParams,I,N)}};if(i&&u.length){const P=i==="backward",I=P?ri:ks,U={pages:u,pageParams:l},X=I(r,U);c=await _(U,X,P)}else{const P=t??u.length;do{const I=y===0?l[0]??r.initialPageParam:ks(r,c);if(y>0&&I==null)break;c=await _(c,I),y++}while(y<P)}return c};e.options.persister?e.fetchFn=()=>{var S,E;return(E=(S=e.options).persister)==null?void 0:E.call(S,C,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=C}}}function ks(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function ri(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}var B,Te,Ue,nt,at,Qe,ut,ot,sr,Ni=(sr=class{constructor(t={}){O(this,B);O(this,Te);O(this,Ue);O(this,nt);O(this,at);O(this,Qe);O(this,ut);O(this,ot);p(this,B,t.queryCache||new ei),p(this,Te,t.mutationCache||new si),p(this,Ue,t.defaultOptions||{}),p(this,nt,new Map),p(this,at,new Map),p(this,Qe,0)}mount(){At(this,Qe)._++,a(this,Qe)===1&&(p(this,ut,os.subscribe(async t=>{t&&(await this.resumePausedMutations(),a(this,B).onFocus())})),p(this,ot,Pt.subscribe(async t=>{t&&(await this.resumePausedMutations(),a(this,B).onOnline())})))}unmount(){var t,e;At(this,Qe)._--,a(this,Qe)===0&&((t=a(this,ut))==null||t.call(this),p(this,ut,void 0),(e=a(this,ot))==null||e.call(this),p(this,ot,void 0))}isFetching(t){return a(this,B).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return a(this,Te).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=a(this,B).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const s=this.defaultQueryOptions(t),r=a(this,B).build(this,s);return t.revalidateIfStale&&r.isStaleByTime(Ze(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(e)}}getQueriesData(t){return a(this,B).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),i=a(this,B).get(r.queryHash),u=i==null?void 0:i.state.data,l=Kr(e,u);if(l!==void 0)return a(this,B).build(this,r).setData(l,{...s,manual:!0})}setQueriesData(t,e,s){return J.batch(()=>a(this,B).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=a(this,B).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=a(this,B);J.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=a(this,B),r={type:"active",...t};return J.batch(()=>(s.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const s={revert:!0,...e},r=J.batch(()=>a(this,B).findAll(t).map(i=>i.cancel(s)));return Promise.all(r).then(ve).catch(ve)}invalidateQueries(t={},e={}){return J.batch(()=>{if(a(this,B).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const s={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(s,e)})}refetchQueries(t={},e){const s={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=J.batch(()=>a(this,B).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let u=i.fetch(void 0,s);return s.throwOnError||(u=u.catch(ve)),i.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(r).then(ve)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=a(this,B).build(this,e);return s.isStaleByTime(Ze(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ve).catch(ve)}fetchInfiniteQuery(t){return t.behavior=Ms(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ve).catch(ve)}ensureInfiniteQueryData(t){return t.behavior=Ms(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Pt.isOnline()?a(this,Te).resumePausedMutations():Promise.resolve()}getQueryCache(){return a(this,B)}getMutationCache(){return a(this,Te)}getDefaultOptions(){return a(this,Ue)}setDefaultOptions(t){p(this,Ue,t)}setQueryDefaults(t,e){a(this,nt).set(Ye(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...a(this,nt).values()];let s={};return e.forEach(r=>{Ft(t,r.queryKey)&&(s={...s,...r.defaultOptions})}),s}setMutationDefaults(t,e){a(this,at).set(Ye(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...a(this,at).values()];let s={};return e.forEach(r=>{Ft(t,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...a(this,Ue).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=as(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===us&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...a(this,Ue).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){a(this,B).clear(),a(this,Te).clear()}},B=new WeakMap,Te=new WeakMap,Ue=new WeakMap,nt=new WeakMap,at=new WeakMap,Qe=new WeakMap,ut=new WeakMap,ot=new WeakMap,sr),le,x,_t,ie,We,lt,Ie,Ce,Ct,ct,ht,$e,ze,Le,dt,L,bt,Jt,Yt,Xt,Zt,es,ts,ss,yr,rr,ii=(rr=class extends ft{constructor(e,s){super();O(this,L);O(this,le);O(this,x);O(this,_t);O(this,ie);O(this,We);O(this,lt);O(this,Ie);O(this,Ce);O(this,Ct);O(this,ct);O(this,ht);O(this,$e);O(this,ze);O(this,Le);O(this,dt,new Set);this.options=s,p(this,le,e),p(this,Ce,null),p(this,Ie,zt()),this.options.experimental_prefetchInRender||a(this,Ie).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(a(this,x).addObserver(this),Ts(a(this,x),this.options)?A(this,L,bt).call(this):this.updateResult(),A(this,L,Zt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rs(a(this,x),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rs(a(this,x),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,A(this,L,es).call(this),A(this,L,ts).call(this),a(this,x).removeObserver(this)}setOptions(e,s){const r=this.options,i=a(this,x);if(this.options=a(this,le).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof be(this.options.enabled,a(this,x))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");A(this,L,ss).call(this),a(this,x).setOptions(this.options),r._defaulted&&!Vt(this.options,r)&&a(this,le).getQueryCache().notify({type:"observerOptionsUpdated",query:a(this,x),observer:this});const u=this.hasListeners();u&&Us(a(this,x),i,this.options,r)&&A(this,L,bt).call(this),this.updateResult(s),u&&(a(this,x)!==i||be(this.options.enabled,a(this,x))!==be(r.enabled,a(this,x))||Ze(this.options.staleTime,a(this,x))!==Ze(r.staleTime,a(this,x)))&&A(this,L,Jt).call(this);const l=A(this,L,Yt).call(this);u&&(a(this,x)!==i||be(this.options.enabled,a(this,x))!==be(r.enabled,a(this,x))||l!==a(this,Le))&&A(this,L,Xt).call(this,l)}getOptimisticResult(e){const s=a(this,le).getQueryCache().build(a(this,le),e),r=this.createResult(s,e);return ai(this,r)&&(p(this,ie,r),p(this,lt,this.options),p(this,We,a(this,x).state)),r}getCurrentResult(){return a(this,ie)}trackResult(e,s){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),s==null||s(i),e[i])})}),r}trackProp(e){a(this,dt).add(e)}getCurrentQuery(){return a(this,x)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=a(this,le).defaultQueryOptions(e),r=a(this,le).getQueryCache().build(a(this,le),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(e){return A(this,L,bt).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),a(this,ie)))}createResult(e,s){var N;const r=a(this,x),i=this.options,u=a(this,ie),l=a(this,We),c=a(this,lt),C=e!==r?e.state:a(this,_t),{state:b}=e;let f={...b},m=!1,R;if(s._optimisticResults){const M=this.hasListeners(),ue=!M&&Ts(e,s),ee=M&&Us(e,r,s,i);(ue||ee)&&(f={...f,...dr(b.data,e.options)}),s._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:T,errorUpdatedAt:S,status:E}=f;if(s.select&&f.data!==void 0)if(u&&f.data===(l==null?void 0:l.data)&&s.select===a(this,Ct))R=a(this,ct);else try{p(this,Ct,s.select),R=s.select(f.data),R=$t(u==null?void 0:u.data,R,s),p(this,ct,R),p(this,Ce,null)}catch(M){p(this,Ce,M)}else R=f.data;if(s.placeholderData!==void 0&&R===void 0&&E==="pending"){let M;if(u!=null&&u.isPlaceholderData&&s.placeholderData===(c==null?void 0:c.placeholderData))M=u.data;else if(M=typeof s.placeholderData=="function"?s.placeholderData((N=a(this,ht))==null?void 0:N.state.data,a(this,ht)):s.placeholderData,s.select&&M!==void 0)try{M=s.select(M),p(this,Ce,null)}catch(ue){p(this,Ce,ue)}M!==void 0&&(E="success",R=$t(u==null?void 0:u.data,M,s),m=!0)}a(this,Ce)&&(T=a(this,Ce),R=a(this,ct),S=Date.now(),E="error");const V=f.fetchStatus==="fetching",_=E==="pending",P=E==="error",I=_&&V,U=R!==void 0,K={status:E,fetchStatus:f.fetchStatus,isPending:_,isSuccess:E==="success",isError:P,isInitialLoading:I,isLoading:I,data:R,dataUpdatedAt:f.dataUpdatedAt,error:T,errorUpdatedAt:S,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>C.dataUpdateCount||f.errorUpdateCount>C.errorUpdateCount,isFetching:V,isRefetching:V&&!_,isLoadingError:P&&!U,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:P&&U,isStale:ls(e,s),refetch:this.refetch,promise:a(this,Ie)};if(this.options.experimental_prefetchInRender){const M=D=>{K.status==="error"?D.reject(K.error):K.data!==void 0&&D.resolve(K.data)},ue=()=>{const D=p(this,Ie,K.promise=zt());M(D)},ee=a(this,Ie);switch(ee.status){case"pending":e.queryHash===r.queryHash&&M(ee);break;case"fulfilled":(K.status==="error"||K.data!==ee.value)&&ue();break;case"rejected":(K.status!=="error"||K.error!==ee.reason)&&ue();break}}return K}updateResult(e){const s=a(this,ie),r=this.createResult(a(this,x),this.options);if(p(this,We,a(this,x).state),p(this,lt,this.options),a(this,We).data!==void 0&&p(this,ht,a(this,x)),Vt(r,s))return;p(this,ie,r);const i={},u=()=>{if(!s)return!0;const{notifyOnChangeProps:l}=this.options,c=typeof l=="function"?l():l;if(c==="all"||!c&&!a(this,dt).size)return!0;const y=new Set(c??a(this,dt));return this.options.throwOnError&&y.add("error"),Object.keys(a(this,ie)).some(C=>{const b=C;return a(this,ie)[b]!==s[b]&&y.has(b)})};(e==null?void 0:e.listeners)!==!1&&u()&&(i.listeners=!0),A(this,L,yr).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&A(this,L,Zt).call(this)}},le=new WeakMap,x=new WeakMap,_t=new WeakMap,ie=new WeakMap,We=new WeakMap,lt=new WeakMap,Ie=new WeakMap,Ce=new WeakMap,Ct=new WeakMap,ct=new WeakMap,ht=new WeakMap,$e=new WeakMap,ze=new WeakMap,Le=new WeakMap,dt=new WeakMap,L=new WeakSet,bt=function(e){A(this,L,ss).call(this);let s=a(this,x).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(ve)),s},Jt=function(){A(this,L,es).call(this);const e=Ze(this.options.staleTime,a(this,x));if(Je||a(this,ie).isStale||!Gt(e))return;const r=nr(a(this,ie).dataUpdatedAt,e)+1;p(this,$e,setTimeout(()=>{a(this,ie).isStale||this.updateResult()},r))},Yt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(a(this,x)):this.options.refetchInterval)??!1},Xt=function(e){A(this,L,ts).call(this),p(this,Le,e),!(Je||be(this.options.enabled,a(this,x))===!1||!Gt(a(this,Le))||a(this,Le)===0)&&p(this,ze,setInterval(()=>{(this.options.refetchIntervalInBackground||os.isFocused())&&A(this,L,bt).call(this)},a(this,Le)))},Zt=function(){A(this,L,Jt).call(this),A(this,L,Xt).call(this,A(this,L,Yt).call(this))},es=function(){a(this,$e)&&(clearTimeout(a(this,$e)),p(this,$e,void 0))},ts=function(){a(this,ze)&&(clearInterval(a(this,ze)),p(this,ze,void 0))},ss=function(){const e=a(this,le).getQueryCache().build(a(this,le),this.options);if(e===a(this,x))return;const s=a(this,x);p(this,x,e),p(this,_t,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},yr=function(e){J.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(a(this,ie))}),a(this,le).getQueryCache().notify({query:a(this,x),type:"observerResultsUpdated"})})},rr);function ni(t,e){return be(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Ts(t,e){return ni(t,e)||t.state.data!==void 0&&rs(t,e,e.refetchOnMount)}function rs(t,e,s){if(be(e.enabled,t)!==!1){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&ls(t,e)}return!1}function Us(t,e,s,r){return(t!==e||be(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&ls(t,s)}function ls(t,e){return be(e.enabled,t)!==!1&&t.isStaleByTime(Ze(e.staleTime,t))}function ai(t,e){return!Vt(t.getCurrentResult(),e)}var qe,je,ce,Re,De,Dt,is,ir,ui=(ir=class extends ft{constructor(e,s){super();O(this,De);O(this,qe);O(this,je);O(this,ce);O(this,Re);p(this,qe,e),this.setOptions(s),this.bindMethods(),A(this,De,Dt).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var r;const s=this.options;this.options=a(this,qe).defaultMutationOptions(e),Vt(this.options,s)||a(this,qe).getMutationCache().notify({type:"observerOptionsUpdated",mutation:a(this,ce),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Ye(s.mutationKey)!==Ye(this.options.mutationKey)?this.reset():((r=a(this,ce))==null?void 0:r.state.status)==="pending"&&a(this,ce).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=a(this,ce))==null||e.removeObserver(this)}onMutationUpdate(e){A(this,De,Dt).call(this),A(this,De,is).call(this,e)}getCurrentResult(){return a(this,je)}reset(){var e;(e=a(this,ce))==null||e.removeObserver(this),p(this,ce,void 0),A(this,De,Dt).call(this),A(this,De,is).call(this)}mutate(e,s){var r;return p(this,Re,s),(r=a(this,ce))==null||r.removeObserver(this),p(this,ce,a(this,qe).getMutationCache().build(a(this,qe),this.options)),a(this,ce).addObserver(this),a(this,ce).execute(e)}},qe=new WeakMap,je=new WeakMap,ce=new WeakMap,Re=new WeakMap,De=new WeakSet,Dt=function(){var s;const e=((s=a(this,ce))==null?void 0:s.state)??fr();p(this,je,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},is=function(e){J.batch(()=>{var s,r,i,u,l,c,y,C;if(a(this,Re)&&this.hasListeners()){const b=a(this,je).variables,f=a(this,je).context;(e==null?void 0:e.type)==="success"?((r=(s=a(this,Re)).onSuccess)==null||r.call(s,e.data,b,f),(u=(i=a(this,Re)).onSettled)==null||u.call(i,e.data,null,b,f)):(e==null?void 0:e.type)==="error"&&((c=(l=a(this,Re)).onError)==null||c.call(l,e.error,b,f),(C=(y=a(this,Re)).onSettled)==null||C.call(y,void 0,e.error,b,f))}this.listeners.forEach(b=>{b(a(this,je))})})},ir),vr=Y.createContext(void 0),gr=t=>{const e=Y.useContext(vr);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Bi=({client:t,children:e})=>(Y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),Br.jsx(vr.Provider,{value:t,children:e})),br=Y.createContext(!1),oi=()=>Y.useContext(br);br.Provider;function li(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ci=Y.createContext(li()),hi=()=>Y.useContext(ci);function mr(t,e){return typeof t=="function"?t(...e):!!t}function pr(){}var di=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},fi=t=>{Y.useEffect(()=>{t.clearReset()},[t])},yi=({result:t,errorResetBoundary:e,throwOnError:s,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&mr(s,[t.error,r]),vi=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},gi=(t,e)=>t.isLoading&&t.isFetching&&!e,bi=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Qs=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function mi(t,e,s){var b,f,m,R,T;const r=gr(),i=oi(),u=hi(),l=r.defaultQueryOptions(t);(f=(b=r.getDefaultOptions().queries)==null?void 0:b._experimental_beforeQuery)==null||f.call(b,l),l._optimisticResults=i?"isRestoring":"optimistic",vi(l),di(l,u),fi(u);const c=!r.getQueryCache().get(l.queryHash),[y]=Y.useState(()=>new e(r,l)),C=y.getOptimisticResult(l);if(Y.useSyncExternalStore(Y.useCallback(S=>{const E=i?()=>{}:y.subscribe(J.batchCalls(S));return y.updateResult(),E},[y,i]),()=>y.getCurrentResult(),()=>y.getCurrentResult()),Y.useEffect(()=>{y.setOptions(l,{listeners:!1})},[l,y]),bi(l,C))throw Qs(l,y,u);if(yi({result:C,errorResetBoundary:u,throwOnError:l.throwOnError,query:r.getQueryCache().get(l.queryHash)}))throw C.error;if((R=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||R.call(m,l,C),l.experimental_prefetchInRender&&!Je&&gi(C,i)){const S=c?Qs(l,y,u):(T=r.getQueryCache().get(l.queryHash))==null?void 0:T.promise;S==null||S.catch(pr).finally(()=>{y.updateResult()})}return l.notifyOnChangeProps?C:y.trackResult(C)}function Ki(t,e){return mi(t,ii)}function Hi(t,e){const s=gr(),[r]=Y.useState(()=>new ui(s,t));Y.useEffect(()=>{r.setOptions(t)},[r,t]);const i=Y.useSyncExternalStore(Y.useCallback(l=>r.subscribe(J.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),u=Y.useCallback((l,c)=>{r.mutate(l,c).catch(pr)},[r]);if(i.error&&mr(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:u,mutateAsync:i.mutate}}var Ot=t=>t.type==="checkbox",Ne=t=>t instanceof Date,ae=t=>t==null;const Fr=t=>typeof t=="object";var W=t=>!ae(t)&&!Array.isArray(t)&&Fr(t)&&!Ne(t),wr=t=>W(t)&&t.target?Ot(t.target)?t.target.checked:t.target.value:t,pi=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Sr=(t,e)=>t.has(pi(e)),Fi=t=>{const e=t.constructor&&t.constructor.prototype;return W(e)&&e.hasOwnProperty("isPrototypeOf")},cs=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Z(t){let e;const s=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(cs&&(t instanceof Blob||r))&&(s||W(t)))if(e=s?[]:{},!s&&!Fi(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Z(t[i]));else return t;return e}var Qt=t=>Array.isArray(t)?t.filter(Boolean):[],G=t=>t===void 0,g=(t,e,s)=>{if(!e||!W(t))return s;const r=Qt(e.split(/[,[\].]+?/)).reduce((i,u)=>ae(i)?i:i[u],t);return G(r)||r===t?G(t[e])?s:t[e]:r},de=t=>typeof t=="boolean",hs=t=>/^\w*$/.test(t),_r=t=>Qt(t.replace(/["|']|\]/g,"").split(/\.|\[/)),j=(t,e,s)=>{let r=-1;const i=hs(e)?[e]:_r(e),u=i.length,l=u-1;for(;++r<u;){const c=i[r];let y=s;if(r!==l){const C=t[c];y=W(C)||Array.isArray(C)?C:isNaN(+i[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=y,t=t[c]}};const Mt={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},me={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ee={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Cr=q.createContext(null),ds=()=>q.useContext(Cr),Gi=t=>{const{children:e,...s}=t;return q.createElement(Cr.Provider,{value:s},e)};var Or=(t,e,s,r=!0)=>{const i={defaultValues:e._defaultValues};for(const u in t)Object.defineProperty(i,u,{get:()=>{const l=u;return e._proxyFormState[l]!==me.all&&(e._proxyFormState[l]=!r||me.all),s&&(s[l]=!0),t[l]}});return i};const fs=typeof window<"u"?Y.useLayoutEffect:Y.useEffect;function wi(t){const e=ds(),{control:s=e.control,disabled:r,name:i,exact:u}=t||{},[l,c]=q.useState(s._formState),y=q.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return fs(()=>s._subscribe({name:i,formState:y.current,exact:u,callback:C=>{!r&&c({...s._formState,...C})}}),[i,r,u]),q.useEffect(()=>{y.current.isValid&&s._setValid(!0)},[s]),q.useMemo(()=>Or(l,s,y.current,!1),[l,s])}var Oe=t=>typeof t=="string",Er=(t,e,s,r,i)=>Oe(t)?(r&&e.watch.add(t),g(s,t,i)):Array.isArray(t)?t.map(u=>(r&&e.watch.add(u),g(s,u))):(r&&(e.watchAll=!0),s);function Si(t){const e=ds(),{control:s=e.control,name:r,defaultValue:i,disabled:u,exact:l}=t||{},c=q.useRef(i),[y,C]=q.useState(s._getWatch(r,c.current));return fs(()=>s._subscribe({name:r,formState:{values:!0},exact:l,callback:b=>!u&&C(Er(r,s._names,b.values||s._formValues,!1,c.current))}),[r,s,u,l]),q.useEffect(()=>s._removeUnmounted()),y}function _i(t){const e=ds(),{name:s,disabled:r,control:i=e.control,shouldUnregister:u}=t,l=Sr(i._names.array,s),c=Si({control:i,name:s,defaultValue:g(i._formValues,s,g(i._defaultValues,s,t.defaultValue)),exact:!0}),y=wi({control:i,name:s,exact:!0}),C=q.useRef(t),b=q.useRef(i.register(s,{...t.rules,value:c,...de(t.disabled)?{disabled:t.disabled}:{}})),f=q.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!g(y.errors,s)},isDirty:{enumerable:!0,get:()=>!!g(y.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!g(y.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!g(y.validatingFields,s)},error:{enumerable:!0,get:()=>g(y.errors,s)}}),[y,s]),m=q.useCallback(E=>b.current.onChange({target:{value:wr(E),name:s},type:Mt.CHANGE}),[s]),R=q.useCallback(()=>b.current.onBlur({target:{value:g(i._formValues,s),name:s},type:Mt.BLUR}),[s,i._formValues]),T=q.useCallback(E=>{const V=g(i._fields,s);V&&E&&(V._f.ref=E)},[i._fields,s]),S=q.useMemo(()=>({name:s,value:c,...de(r)||y.disabled?{disabled:y.disabled||r}:{},onChange:m,onBlur:R,ref:T}),[s,r,y.disabled,m,R,T,c]);return q.useEffect(()=>{const E=i._options.shouldUnregister||u;i.register(s,{...C.current.rules,...de(C.current.disabled)?{disabled:C.current.disabled}:{}});const V=(_,P)=>{const I=g(i._fields,_);I&&I._f&&(I._f.mount=P)};if(V(s,!0),E){const _=Z(g(i._options.defaultValues,s));j(i._defaultValues,s,_),G(g(i._formValues,s))&&j(i._formValues,s,_)}return!l&&i.register(s),()=>{(l?E&&!i._state.action:E)?i.unregister(s):V(s,!1)}},[s,i,l,u]),q.useEffect(()=>{i._setDisabledField({disabled:r,name:s})},[r,s,i]),q.useMemo(()=>({field:S,formState:y,fieldState:f}),[S,y,f])}const Wi=t=>t.render(_i(t));var Ci=(t,e,s,r,i)=>e?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[r]:i||!0}}:{},mt=t=>Array.isArray(t)?t:[t],Is=()=>{let t=[];return{get observers(){return t},next:i=>{for(const u of t)u.next&&u.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(u=>u!==i)}}),unsubscribe:()=>{t=[]}}},ns=t=>ae(t)||!Fr(t);function Pe(t,e){if(ns(t)||ns(e))return t===e;if(Ne(t)&&Ne(e))return t.getTime()===e.getTime();const s=Object.keys(t),r=Object.keys(e);if(s.length!==r.length)return!1;for(const i of s){const u=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const l=e[i];if(Ne(u)&&Ne(l)||W(u)&&W(l)||Array.isArray(u)&&Array.isArray(l)?!Pe(u,l):u!==l)return!1}}return!0}var ne=t=>W(t)&&!Object.keys(t).length,ys=t=>t.type==="file",pe=t=>typeof t=="function",kt=t=>{if(!cs)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Ar=t=>t.type==="select-multiple",vs=t=>t.type==="radio",Oi=t=>vs(t)||Ot(t),Ht=t=>kt(t)&&t.isConnected;function Ei(t,e){const s=e.slice(0,-1).length;let r=0;for(;r<s;)t=G(t)?r++:t[e[r++]];return t}function Ai(t){for(const e in t)if(t.hasOwnProperty(e)&&!G(t[e]))return!1;return!0}function z(t,e){const s=Array.isArray(e)?e:hs(e)?[e]:_r(e),r=s.length===1?t:Ei(t,s),i=s.length-1,u=s[i];return r&&delete r[u],i!==0&&(W(r)&&ne(r)||Array.isArray(r)&&Ai(r))&&z(t,s.slice(0,-1)),t}var Rr=t=>{for(const e in t)if(pe(t[e]))return!0;return!1};function Tt(t,e={}){const s=Array.isArray(t);if(W(t)||s)for(const r in t)Array.isArray(t[r])||W(t[r])&&!Rr(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Tt(t[r],e[r])):ae(t[r])||(e[r]=!0);return e}function Dr(t,e,s){const r=Array.isArray(t);if(W(t)||r)for(const i in t)Array.isArray(t[i])||W(t[i])&&!Rr(t[i])?G(e)||ns(s[i])?s[i]=Array.isArray(t[i])?Tt(t[i],[]):{...Tt(t[i])}:Dr(t[i],ae(e)?{}:e[i],s[i]):s[i]=!Pe(t[i],e[i]);return s}var vt=(t,e)=>Dr(t,e,Tt(e));const Ls={value:!1,isValid:!1},qs={value:!0,isValid:!0};var xr=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!G(t[0].attributes.value)?G(t[0].value)||t[0].value===""?qs:{value:t[0].value,isValid:!0}:qs:Ls}return Ls},Vr=(t,{valueAsNumber:e,valueAsDate:s,setValueAs:r})=>G(t)?t:e?t===""?NaN:t&&+t:s&&Oe(t)?new Date(t):r?r(t):t;const js={isValid:!1,value:null};var Pr=t=>Array.isArray(t)?t.reduce((e,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:e,js):js;function Ns(t){const e=t.ref;return ys(e)?e.files:vs(e)?Pr(t.refs).value:Ar(e)?[...e.selectedOptions].map(({value:s})=>s):Ot(e)?xr(t.refs).value:Vr(G(e.value)?t.ref.value:e.value,t)}var Ri=(t,e,s,r)=>{const i={};for(const u of t){const l=g(e,u);l&&j(i,u,l._f)}return{criteriaMode:s,names:[...t],fields:i,shouldUseNativeValidation:r}},Ut=t=>t instanceof RegExp,gt=t=>G(t)?t:Ut(t)?t.source:W(t)?Ut(t.value)?t.value.source:t.value:t,Bs=t=>({isOnSubmit:!t||t===me.onSubmit,isOnBlur:t===me.onBlur,isOnChange:t===me.onChange,isOnAll:t===me.all,isOnTouch:t===me.onTouched});const Ks="AsyncFunction";var Di=t=>!!t&&!!t.validate&&!!(pe(t.validate)&&t.validate.constructor.name===Ks||W(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Ks)),xi=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Hs=(t,e,s)=>!s&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const pt=(t,e,s,r)=>{for(const i of s||Object.keys(t)){const u=g(t,i);if(u){const{_f:l,...c}=u;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],i)&&!r)return!0;if(l.ref&&e(l.ref,l.name)&&!r)return!0;if(pt(c,e))break}else if(W(c)&&pt(c,e))break}}};function Gs(t,e,s){const r=g(t,s);if(r||hs(s))return{error:r,name:s};const i=s.split(".");for(;i.length;){const u=i.join("."),l=g(e,u),c=g(t,u);if(l&&!Array.isArray(l)&&s!==u)return{name:s};if(c&&c.type)return{name:u,error:c};i.pop()}return{name:s}}var Vi=(t,e,s,r)=>{s(t);const{name:i,...u}=t;return ne(u)||Object.keys(u).length>=Object.keys(e).length||Object.keys(u).find(l=>e[l]===(!r||me.all))},Pi=(t,e,s)=>!t||!e||t===e||mt(t).some(r=>r&&(s?r===e:r.startsWith(e)||e.startsWith(r))),Mi=(t,e,s,r,i)=>i.isOnAll?!1:!s&&i.isOnTouch?!(e||t):(s?r.isOnBlur:i.isOnBlur)?!t:(s?r.isOnChange:i.isOnChange)?t:!0,ki=(t,e)=>!Qt(g(t,e)).length&&z(t,e),Ti=(t,e,s)=>{const r=mt(g(t,s));return j(r,"root",e[s]),j(t,s,r),t},xt=t=>Oe(t);function Ws(t,e,s="validate"){if(xt(t)||Array.isArray(t)&&t.every(xt)||de(t)&&!t)return{type:s,message:xt(t)?t:"",ref:e}}var Xe=t=>W(t)&&!Ut(t)?t:{value:t,message:""},$s=async(t,e,s,r,i,u)=>{const{ref:l,refs:c,required:y,maxLength:C,minLength:b,min:f,max:m,pattern:R,validate:T,name:S,valueAsNumber:E,mount:V}=t._f,_=g(s,S);if(!V||e.has(S))return{};const P=c?c[0]:l,I=D=>{i&&P.reportValidity&&(P.setCustomValidity(de(D)?"":D||""),P.reportValidity())},U={},X=vs(l),K=Ot(l),N=X||K,M=(E||ys(l))&&G(l.value)&&G(_)||kt(l)&&l.value===""||_===""||Array.isArray(_)&&!_.length,ue=Ci.bind(null,S,r,U),ee=(D,k,H,oe=Ee.maxLength,fe=Ee.minLength)=>{const Fe=D?k:H;U[S]={type:D?oe:fe,message:Fe,ref:l,...ue(D?oe:fe,Fe)}};if(u?!Array.isArray(_)||!_.length:y&&(!N&&(M||ae(_))||de(_)&&!_||K&&!xr(c).isValid||X&&!Pr(c).isValid)){const{value:D,message:k}=xt(y)?{value:!!y,message:y}:Xe(y);if(D&&(U[S]={type:Ee.required,message:k,ref:P,...ue(Ee.required,k)},!r))return I(k),U}if(!M&&(!ae(f)||!ae(m))){let D,k;const H=Xe(m),oe=Xe(f);if(!ae(_)&&!isNaN(_)){const fe=l.valueAsNumber||_&&+_;ae(H.value)||(D=fe>H.value),ae(oe.value)||(k=fe<oe.value)}else{const fe=l.valueAsDate||new Date(_),Fe=Et=>new Date(new Date().toDateString()+" "+Et),xe=l.type=="time",yt=l.type=="week";Oe(H.value)&&_&&(D=xe?Fe(_)>Fe(H.value):yt?_>H.value:fe>new Date(H.value)),Oe(oe.value)&&_&&(k=xe?Fe(_)<Fe(oe.value):yt?_<oe.value:fe<new Date(oe.value))}if((D||k)&&(ee(!!D,H.message,oe.message,Ee.max,Ee.min),!r))return I(U[S].message),U}if((C||b)&&!M&&(Oe(_)||u&&Array.isArray(_))){const D=Xe(C),k=Xe(b),H=!ae(D.value)&&_.length>+D.value,oe=!ae(k.value)&&_.length<+k.value;if((H||oe)&&(ee(H,D.message,k.message),!r))return I(U[S].message),U}if(R&&!M&&Oe(_)){const{value:D,message:k}=Xe(R);if(Ut(D)&&!_.match(D)&&(U[S]={type:Ee.pattern,message:k,ref:l,...ue(Ee.pattern,k)},!r))return I(k),U}if(T){if(pe(T)){const D=await T(_,s),k=Ws(D,P);if(k&&(U[S]={...k,...ue(Ee.validate,k.message)},!r))return I(k.message),U}else if(W(T)){let D={};for(const k in T){if(!ne(D)&&!r)break;const H=Ws(await T[k](_,s),P,k);H&&(D={...H,...ue(k,H.message)},I(H.message),r&&(U[S]=D))}if(!ne(D)&&(U[S]={ref:P,...D},!r))return U}}return I(!0),U};const Ui={mode:me.onSubmit,reValidateMode:me.onChange,shouldFocusError:!0};function Qi(t={}){let e={...Ui,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:pe(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let i=W(e.defaultValues)||W(e.values)?Z(e.defaultValues||e.values)||{}:{},u=e.shouldUnregister?{}:Z(i),l={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},y,C=0;const b={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...b};const m={array:Is(),state:Is()},R=Bs(e.mode),T=Bs(e.reValidateMode),S=e.criteriaMode===me.all,E=n=>o=>{clearTimeout(C),C=setTimeout(n,o)},V=async n=>{if(!e.disabled&&(b.isValid||f.isValid||n)){const o=e.resolver?ne((await M()).errors):await ee(r,!0);o!==s.isValid&&m.state.next({isValid:o})}},_=(n,o)=>{!e.disabled&&(b.isValidating||b.validatingFields||f.isValidating||f.validatingFields)&&((n||Array.from(c.mount)).forEach(h=>{h&&(o?j(s.validatingFields,h,o):z(s.validatingFields,h))}),m.state.next({validatingFields:s.validatingFields,isValidating:!ne(s.validatingFields)}))},P=(n,o=[],h,F,v=!0,d=!0)=>{if(F&&h&&!e.disabled){if(l.action=!0,d&&Array.isArray(g(r,n))){const w=h(g(r,n),F.argA,F.argB);v&&j(r,n,w)}if(d&&Array.isArray(g(s.errors,n))){const w=h(g(s.errors,n),F.argA,F.argB);v&&j(s.errors,n,w),ki(s.errors,n)}if((b.touchedFields||f.touchedFields)&&d&&Array.isArray(g(s.touchedFields,n))){const w=h(g(s.touchedFields,n),F.argA,F.argB);v&&j(s.touchedFields,n,w)}(b.dirtyFields||f.dirtyFields)&&(s.dirtyFields=vt(i,u)),m.state.next({name:n,isDirty:k(n,o),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else j(u,n,o)},I=(n,o)=>{j(s.errors,n,o),m.state.next({errors:s.errors})},U=n=>{s.errors=n,m.state.next({errors:s.errors,isValid:!1})},X=(n,o,h,F)=>{const v=g(r,n);if(v){const d=g(u,n,G(h)?g(i,n):h);G(d)||F&&F.defaultChecked||o?j(u,n,o?d:Ns(v._f)):fe(n,d),l.mount&&V()}},K=(n,o,h,F,v)=>{let d=!1,w=!1;const Q={name:n};if(!e.disabled){if(!h||F){(b.isDirty||f.isDirty)&&(w=s.isDirty,s.isDirty=Q.isDirty=k(),d=w!==Q.isDirty);const $=Pe(g(i,n),o);w=!!g(s.dirtyFields,n),$?z(s.dirtyFields,n):j(s.dirtyFields,n,!0),Q.dirtyFields=s.dirtyFields,d=d||(b.dirtyFields||f.dirtyFields)&&w!==!$}if(h){const $=g(s.touchedFields,n);$||(j(s.touchedFields,n,h),Q.touchedFields=s.touchedFields,d=d||(b.touchedFields||f.touchedFields)&&$!==h)}d&&v&&m.state.next(Q)}return d?Q:{}},N=(n,o,h,F)=>{const v=g(s.errors,n),d=(b.isValid||f.isValid)&&de(o)&&s.isValid!==o;if(e.delayError&&h?(y=E(()=>I(n,h)),y(e.delayError)):(clearTimeout(C),y=null,h?j(s.errors,n,h):z(s.errors,n)),(h?!Pe(v,h):v)||!ne(F)||d){const w={...F,...d&&de(o)?{isValid:o}:{},errors:s.errors,name:n};s={...s,...w},m.state.next(w)}},M=async n=>{_(n,!0);const o=await e.resolver(u,e.context,Ri(n||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return _(n),o},ue=async n=>{const{errors:o}=await M(n);if(n)for(const h of n){const F=g(o,h);F?j(s.errors,h,F):z(s.errors,h)}else s.errors=o;return o},ee=async(n,o,h={valid:!0})=>{for(const F in n){const v=n[F];if(v){const{_f:d,...w}=v;if(d){const Q=c.array.has(d.name),$=v._f&&Di(v._f);$&&b.validatingFields&&_([F],!0);const te=await $s(v,c.disabled,u,S,e.shouldUseNativeValidation&&!o,Q);if($&&b.validatingFields&&_([F]),te[d.name]&&(h.valid=!1,o))break;!o&&(g(te,d.name)?Q?Ti(s.errors,te,d.name):j(s.errors,d.name,te[d.name]):z(s.errors,d.name))}!ne(w)&&await ee(w,o,h)}}return h.valid},D=()=>{for(const n of c.unMount){const o=g(r,n);o&&(o._f.refs?o._f.refs.every(h=>!Ht(h)):!Ht(o._f.ref))&&Lt(n)}c.unMount=new Set},k=(n,o)=>!e.disabled&&(n&&o&&j(u,n,o),!Pe(gs(),i)),H=(n,o,h)=>Er(n,c,{...l.mount?u:G(o)?i:Oe(n)?{[n]:o}:o},h,o),oe=n=>Qt(g(l.mount?u:i,n,e.shouldUnregister?g(i,n,[]):[])),fe=(n,o,h={})=>{const F=g(r,n);let v=o;if(F){const d=F._f;d&&(!d.disabled&&j(u,n,Vr(o,d)),v=kt(d.ref)&&ae(o)?"":o,Ar(d.ref)?[...d.ref.options].forEach(w=>w.selected=v.includes(w.value)):d.refs?Ot(d.ref)?d.refs.length>1?d.refs.forEach(w=>(!w.defaultChecked||!w.disabled)&&(w.checked=Array.isArray(v)?!!v.find(Q=>Q===w.value):v===w.value)):d.refs[0]&&(d.refs[0].checked=!!v):d.refs.forEach(w=>w.checked=w.value===v):ys(d.ref)?d.ref.value="":(d.ref.value=v,d.ref.type||m.state.next({name:n,values:Z(u)})))}(h.shouldDirty||h.shouldTouch)&&K(n,v,h.shouldTouch,h.shouldDirty,!0),h.shouldValidate&&It(n)},Fe=(n,o,h)=>{for(const F in o){const v=o[F],d=`${n}.${F}`,w=g(r,d);(c.array.has(n)||W(v)||w&&!w._f)&&!Ne(v)?Fe(d,v,h):fe(d,v,h)}},xe=(n,o,h={})=>{const F=g(r,n),v=c.array.has(n),d=Z(o);j(u,n,d),v?(m.array.next({name:n,values:Z(u)}),(b.isDirty||b.dirtyFields||f.isDirty||f.dirtyFields)&&h.shouldDirty&&m.state.next({name:n,dirtyFields:vt(i,u),isDirty:k(n,d)})):F&&!F._f&&!ae(d)?Fe(n,d,h):fe(n,d,h),Hs(n,c)&&m.state.next({...s}),m.state.next({name:l.mount?n:void 0,values:Z(u)})},yt=async n=>{l.mount=!0;const o=n.target;let h=o.name,F=!0;const v=g(r,h),d=w=>{F=Number.isNaN(w)||Ne(w)&&isNaN(w.getTime())||Pe(w,g(u,h,w))};if(v){let w,Q;const $=o.type?Ns(v._f):wr(n),te=n.type===Mt.BLUR||n.type===Mt.FOCUS_OUT,qr=!xi(v._f)&&!e.resolver&&!g(s.errors,h)&&!v._f.deps||Mi(te,g(s.touchedFields,h),s.isSubmitted,T,R),jt=Hs(h,c,te);j(u,h,$),te?(v._f.onBlur&&v._f.onBlur(n),y&&y(0)):v._f.onChange&&v._f.onChange(n);const Nt=K(h,$,te),jr=!ne(Nt)||jt;if(!te&&m.state.next({name:h,type:n.type,values:Z(u)}),qr)return(b.isValid||f.isValid)&&(e.mode==="onBlur"?te&&V():te||V()),jr&&m.state.next({name:h,...jt?{}:Nt});if(!te&&jt&&m.state.next({...s}),e.resolver){const{errors:Es}=await M([h]);if(d($),F){const Nr=Gs(s.errors,r,h),As=Gs(Es,r,Nr.name||h);w=As.error,h=As.name,Q=ne(Es)}}else _([h],!0),w=(await $s(v,c.disabled,u,S,e.shouldUseNativeValidation))[h],_([h]),d($),F&&(w?Q=!1:(b.isValid||f.isValid)&&(Q=await ee(r,!0)));F&&(v._f.deps&&It(v._f.deps),N(h,Q,w,Nt))}},Et=(n,o)=>{if(g(s.errors,o)&&n.focus)return n.focus(),1},It=async(n,o={})=>{let h,F;const v=mt(n);if(e.resolver){const d=await ue(G(n)?n:v);h=ne(d),F=n?!v.some(w=>g(d,w)):h}else n?(F=(await Promise.all(v.map(async d=>{const w=g(r,d);return await ee(w&&w._f?{[d]:w}:w)}))).every(Boolean),!(!F&&!s.isValid)&&V()):F=h=await ee(r);return m.state.next({...!Oe(n)||(b.isValid||f.isValid)&&h!==s.isValid?{}:{name:n},...e.resolver||!n?{isValid:h}:{},errors:s.errors}),o.shouldFocus&&!F&&pt(r,Et,n?v:c.mount),F},gs=n=>{const o={...l.mount?u:i};return G(n)?o:Oe(n)?g(o,n):n.map(h=>g(o,h))},bs=(n,o)=>({invalid:!!g((o||s).errors,n),isDirty:!!g((o||s).dirtyFields,n),error:g((o||s).errors,n),isValidating:!!g(s.validatingFields,n),isTouched:!!g((o||s).touchedFields,n)}),Mr=n=>{n&&mt(n).forEach(o=>z(s.errors,o)),m.state.next({errors:n?s.errors:{}})},ms=(n,o,h)=>{const F=(g(r,n,{_f:{}})._f||{}).ref,v=g(s.errors,n)||{},{ref:d,message:w,type:Q,...$}=v;j(s.errors,n,{...$,...o,ref:F}),m.state.next({name:n,errors:s.errors,isValid:!1}),h&&h.shouldFocus&&F&&F.focus&&F.focus()},kr=(n,o)=>pe(n)?m.state.subscribe({next:h=>n(H(void 0,o),h)}):H(n,o,!0),ps=n=>m.state.subscribe({next:o=>{Pi(n.name,o.name,n.exact)&&Vi(o,n.formState||b,Lr,n.reRenderRoot)&&n.callback({values:{...u},...s,...o})}}).unsubscribe,Tr=n=>(l.mount=!0,f={...f,...n.formState},ps({...n,formState:f})),Lt=(n,o={})=>{for(const h of n?mt(n):c.mount)c.mount.delete(h),c.array.delete(h),o.keepValue||(z(r,h),z(u,h)),!o.keepError&&z(s.errors,h),!o.keepDirty&&z(s.dirtyFields,h),!o.keepTouched&&z(s.touchedFields,h),!o.keepIsValidating&&z(s.validatingFields,h),!e.shouldUnregister&&!o.keepDefaultValue&&z(i,h);m.state.next({values:Z(u)}),m.state.next({...s,...o.keepDirty?{isDirty:k()}:{}}),!o.keepIsValid&&V()},Fs=({disabled:n,name:o})=>{(de(n)&&l.mount||n||c.disabled.has(o))&&(n?c.disabled.add(o):c.disabled.delete(o))},qt=(n,o={})=>{let h=g(r,n);const F=de(o.disabled)||de(e.disabled);return j(r,n,{...h||{},_f:{...h&&h._f?h._f:{ref:{name:n}},name:n,mount:!0,...o}}),c.mount.add(n),h?Fs({disabled:de(o.disabled)?o.disabled:e.disabled,name:n}):X(n,!0,o.value),{...F?{disabled:o.disabled||e.disabled}:{},...e.progressive?{required:!!o.required,min:gt(o.min),max:gt(o.max),minLength:gt(o.minLength),maxLength:gt(o.maxLength),pattern:gt(o.pattern)}:{},name:n,onChange:yt,onBlur:yt,ref:v=>{if(v){qt(n,o),h=g(r,n);const d=G(v.value)&&v.querySelectorAll&&v.querySelectorAll("input,select,textarea")[0]||v,w=Oi(d),Q=h._f.refs||[];if(w?Q.find($=>$===d):d===h._f.ref)return;j(r,n,{_f:{...h._f,...w?{refs:[...Q.filter(Ht),d,...Array.isArray(g(i,n))?[{}]:[]],ref:{type:d.type,name:n}}:{ref:d}}}),X(n,!1,void 0,d)}else h=g(r,n,{}),h._f&&(h._f.mount=!1),(e.shouldUnregister||o.shouldUnregister)&&!(Sr(c.array,n)&&l.action)&&c.unMount.add(n)}}},ws=()=>e.shouldFocusError&&pt(r,Et,c.mount),Ur=n=>{de(n)&&(m.state.next({disabled:n}),pt(r,(o,h)=>{const F=g(r,h);F&&(o.disabled=F._f.disabled||n,Array.isArray(F._f.refs)&&F._f.refs.forEach(v=>{v.disabled=F._f.disabled||n}))},0,!1))},Ss=(n,o)=>async h=>{let F;h&&(h.preventDefault&&h.preventDefault(),h.persist&&h.persist());let v=Z(u);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:d,values:w}=await M();s.errors=d,v=w}else await ee(r);if(c.disabled.size)for(const d of c.disabled)j(v,d,void 0);if(z(s.errors,"root"),ne(s.errors)){m.state.next({errors:{}});try{await n(v,h)}catch(d){F=d}}else o&&await o({...s.errors},h),ws(),setTimeout(ws);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ne(s.errors)&&!F,submitCount:s.submitCount+1,errors:s.errors}),F)throw F},Qr=(n,o={})=>{g(r,n)&&(G(o.defaultValue)?xe(n,Z(g(i,n))):(xe(n,o.defaultValue),j(i,n,Z(o.defaultValue))),o.keepTouched||z(s.touchedFields,n),o.keepDirty||(z(s.dirtyFields,n),s.isDirty=o.defaultValue?k(n,Z(g(i,n))):k()),o.keepError||(z(s.errors,n),b.isValid&&V()),m.state.next({...s}))},_s=(n,o={})=>{const h=n?Z(n):i,F=Z(h),v=ne(n),d=v?i:F;if(o.keepDefaultValues||(i=h),!o.keepValues){if(o.keepDirtyValues){const w=new Set([...c.mount,...Object.keys(vt(i,u))]);for(const Q of Array.from(w))g(s.dirtyFields,Q)?j(d,Q,g(u,Q)):xe(Q,g(d,Q))}else{if(cs&&G(n))for(const w of c.mount){const Q=g(r,w);if(Q&&Q._f){const $=Array.isArray(Q._f.refs)?Q._f.refs[0]:Q._f.ref;if(kt($)){const te=$.closest("form");if(te){te.reset();break}}}}for(const w of c.mount)xe(w,g(d,w))}u=Z(d),m.array.next({values:{...d}}),m.state.next({values:{...d}})}c={mount:o.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!b.isValid||!!o.keepIsValid||!!o.keepDirtyValues,l.watch=!!e.shouldUnregister,m.state.next({submitCount:o.keepSubmitCount?s.submitCount:0,isDirty:v?!1:o.keepDirty?s.isDirty:!!(o.keepDefaultValues&&!Pe(n,i)),isSubmitted:o.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:v?{}:o.keepDirtyValues?o.keepDefaultValues&&u?vt(i,u):s.dirtyFields:o.keepDefaultValues&&n?vt(i,n):o.keepDirty?s.dirtyFields:{},touchedFields:o.keepTouched?s.touchedFields:{},errors:o.keepErrors?s.errors:{},isSubmitSuccessful:o.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},Cs=(n,o)=>_s(pe(n)?n(u):n,o),Ir=(n,o={})=>{const h=g(r,n),F=h&&h._f;if(F){const v=F.refs?F.refs[0]:F.ref;v.focus&&(v.focus(),o.shouldSelect&&pe(v.select)&&v.select())}},Lr=n=>{s={...s,...n}},Os={control:{register:qt,unregister:Lt,getFieldState:bs,handleSubmit:Ss,setError:ms,_subscribe:ps,_runSchema:M,_getWatch:H,_getDirty:k,_setValid:V,_setFieldArray:P,_setDisabledField:Fs,_setErrors:U,_getFieldArray:oe,_reset:_s,_resetDefaultValues:()=>pe(e.defaultValues)&&e.defaultValues().then(n=>{Cs(n,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:Ur,_subjects:m,_proxyFormState:b,get _fields(){return r},get _formValues(){return u},get _state(){return l},set _state(n){l=n},get _defaultValues(){return i},get _names(){return c},set _names(n){c=n},get _formState(){return s},get _options(){return e},set _options(n){e={...e,...n}}},subscribe:Tr,trigger:It,register:qt,handleSubmit:Ss,watch:kr,setValue:xe,getValues:gs,reset:Cs,resetField:Qr,clearErrors:Mr,unregister:Lt,setError:ms,setFocus:Ir,getFieldState:bs};return{...Os,formControl:Os}}function $i(t={}){const e=q.useRef(void 0),s=q.useRef(void 0),[r,i]=q.useState({isDirty:!1,isValidating:!1,isLoading:pe(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:pe(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:Qi(t),formState:r},t.formControl&&t.defaultValues&&!pe(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const u=e.current.control;return u._options=t,fs(()=>{const l=u._subscribe({formState:u._proxyFormState,callback:()=>i({...u._formState}),reRenderRoot:!0});return i(c=>({...c,isReady:!0})),u._formState.isReady=!0,l},[u]),q.useEffect(()=>u._disableForm(t.disabled),[u,t.disabled]),q.useEffect(()=>{t.mode&&(u._options.mode=t.mode),t.reValidateMode&&(u._options.reValidateMode=t.reValidateMode),t.errors&&!ne(t.errors)&&u._setErrors(t.errors)},[u,t.errors,t.mode,t.reValidateMode]),q.useEffect(()=>{t.shouldUnregister&&u._subjects.state.next({values:u._getWatch()})},[u,t.shouldUnregister]),q.useEffect(()=>{if(u._proxyFormState.isDirty){const l=u._getDirty();l!==r.isDirty&&u._subjects.state.next({isDirty:l})}},[u,r.isDirty]),q.useEffect(()=>{t.values&&!Pe(t.values,s.current)?(u._reset(t.values,u._options.resetOptions),s.current=t.values,i(l=>({...l}))):u._resetDefaultValues()},[u,t.values]),q.useEffect(()=>{u._state.mount||(u._setValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),e.current.formState=Or(r,u),e.current}export{Wi as C,Gi as F,Ni as Q,Bi as a,gr as b,Hi as c,$i as d,Ci as e,ds as f,g,j as s,Ki as u};
